

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tutorial &mdash; Tilt  documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-129150759-2"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-129150759-2');
</script>


  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html">
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Tilt Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Configs From Other Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="upgrade_skaffold.html">From Skaffold</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrade_docker_compose.html">From Docker Compose</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker_compose_alpha.html">Docker Compose Support (Alpha)</a></li>
<li class="toctree-l1"><a class="reference internal" href="helm.html">For Helm Users</a></li>
</ul>
<p class="caption"><span class="caption-text">Using Tilt</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="tiltfile_concepts.html">Tiltfile Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="fast_build.html">Optimizing a Tiltfile</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Tiltfile API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="code_of_conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Tilt</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Tutorial</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/windmilleng/tilt/blob/master/docs/write_your_tiltfile.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorial">
<h1>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h1>
<p>This guide walks you through setting up Tilt for local Kubernetes development. You’ll write a <code class="docutils literal notranslate"><span class="pre">Tiltfile</span></code> for your project and be able to use Tilt with your project. This guide assumes you’ve installed Tilt and have a project you can already build and deploy to Kubernetes.</p>
<p>Setting up Tilt should take about about 15 minutes. Before we begin, join the <code class="docutils literal notranslate"><span class="pre">#tilt</span></code> channel in Kubernetes Slack for technical or moral support.</p>
<div class="section" id="example-tiltfile">
<h2>Example Tiltfile<a class="headerlink" href="#example-tiltfile" title="Permalink to this headline">¶</a></h2>
<p>At the end of this guide, your Tiltfile will look something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Deploy: tell Tilt what yaml to deploy</span>
<span class="n">k8s_yaml</span><span class="p">(</span><span class="s1">&#39;app.yaml&#39;</span><span class="p">)</span>

<span class="c1"># Build: tell Tilt what images to build from which directories</span>
<span class="n">docker_build</span><span class="p">(</span><span class="s1">&#39;companyname/frontend&#39;</span><span class="p">,</span> <span class="s1">&#39;frontend&#39;</span><span class="p">)</span>
<span class="n">docker_build</span><span class="p">(</span><span class="s1">&#39;companyname/backend&#39;</span><span class="p">,</span> <span class="s1">&#39;backend&#39;</span><span class="p">)</span>
<span class="c1"># ...</span>

<span class="c1"># Watch: tell Tilt how to connect locally (optional)</span>
<span class="n">k8s_resource</span><span class="p">(</span><span class="s1">&#39;frontend&#39;</span><span class="p">,</span> <span class="n">port_forwards</span><span class="o">=</span><span class="mi">8080</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="hello-world">
<h2>Hello World<a class="headerlink" href="#hello-world" title="Permalink to this headline">¶</a></h2>
<p>Run <code class="docutils literal notranslate"><span class="pre">tilt</span> <span class="pre">up</span></code> to enter Tilt’s Heads-Up Display. Instead of writing your configuration all at once, we’ll use Tilt interactively. Each time you save your configuration, Tilt will reexecute it. Tilt should be complaining there’s no file named <code class="docutils literal notranslate"><span class="pre">Tiltfile</span></code>. Open it in your editor and write:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">print</span><span class="p">(</span><span class="s1">&#39;Hello Tiltfile&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now save it. Congrats, you just ran your first <code class="docutils literal notranslate"><span class="pre">Tiltfile</span></code>. Tilt’s configurations are programs in Starlark, a dialect of Python. Can you see “Hello Tiltfile” in Tilt’s UI? Tilt is also warning you there are no declared resources. Let’s add some.</p>
</div>
<div class="section" id="step-1-deploy">
<h2>Step 1: Deploy<a class="headerlink" href="#step-1-deploy" title="Permalink to this headline">¶</a></h2>
<p>Use the <code class="docutils literal notranslate"><span class="pre">k8s_yaml</span></code> function to tell Tilt about Kubernetes objects to deploy:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">k8s_yaml</span><span class="p">(</span><span class="s1">&#39;app.yaml&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Tilt supports many deployment configuration practices (for more details, check out the YAML section of “Tiltfile Functions”):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># multiple yaml files; can be either a list or multiple calls</span>
<span class="n">k8s_yaml</span><span class="p">([</span><span class="s1">&#39;foo.yaml&#39;</span><span class="p">,</span> <span class="s1">&#39;bar.yaml&#39;</span><span class="p">])</span>

<span class="c1"># run a command to generate yaml</span>
<span class="n">k8s_yaml</span><span class="p">(</span><span class="n">local</span><span class="p">(</span><span class="s1">&#39;gen_k8s_yaml.py&#39;</span><span class="p">))</span> <span class="c1"># a custom script</span>
<span class="n">k8s_yaml</span><span class="p">(</span><span class="n">kustomize</span><span class="p">(</span><span class="s1">&#39;config_dir&#39;</span><span class="p">))</span> <span class="c1"># built-in support for popular tools</span>
<span class="n">k8s_yaml</span><span class="p">(</span><span class="n">helm</span><span class="p">(</span><span class="s1">&#39;chart_dir&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>Add code that calls <code class="docutils literal notranslate"><span class="pre">k8s_yaml</span></code>. Tilt will parse the yaml, display the found objects, and deploy them. If there are problems, update your configuration and let Tilt reexecute your Tiltfile until you see the right objects.</p>
</div>
<div class="section" id="step-2-build">
<h2>Step 2: Build<a class="headerlink" href="#step-2-build" title="Permalink to this headline">¶</a></h2>
<p>Tilt can build docker images, then inject them into the Kubernetes yaml and deploy. Use the <code class="docutils literal notranslate"><span class="pre">docker_build</span></code> function to tell Tilt how to build an image: (See the Build section of “Tiltfile Functions” for optional args like Dockerfile or build args)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># docker build -t companyname/frontend ./frontend</span>
<span class="n">docker_build</span><span class="p">(</span><span class="s1">&#39;companyname/frontend&#39;</span><span class="p">,</span> <span class="s1">&#39;frontend&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Edit some source code and save. Tilt starts rebuilding and will redeploy, automatically. Explore Tilt’s UI (there’s a legend in the bottom right; as you navigate it changes to tell you what’s available from your current state). Try introducing a build error or a runtime crash and see Tilt respond.</p>
<p>You can optimize your builds in various ways. This especially helps for projects with slow builds that run in the a cloud cluster, but we suggest setting up your whole project first.</p>
</div>
<div class="section" id="step-3-watch-optional">
<h2>Step 3: Watch (Optional)<a class="headerlink" href="#step-3-watch-optional" title="Permalink to this headline">¶</a></h2>
<p>Tilt can give you consistent port forwards to running pods (whether they’re running locally or in the cloud). Call the <code class="docutils literal notranslate"><span class="pre">k8s_resource</span></code> function with the name of the resource you want to access (taken from the UI):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">k8s_resource</span><span class="p">(</span><span class="s1">&#39;frontend&#39;</span><span class="p">,</span> <span class="n">port_forwards</span><span class="o">=</span><span class="s1">&#39;9000&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">k8s_resource</span></code> to change the resource grouping, or forward multiple ports, as described in the “Watch” section of <code class="docutils literal notranslate"><span class="pre">Tiltfile</span> <span class="pre">Functions</span></code>.</p>
</div>
<div class="section" id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this headline">¶</a></h2>
<p>You should now have Tilt working with your project. Next you can:</p>
<ul class="simple">
<li>Go happily use Tilt</li>
<li>Let us know how it went (great, bad, or improvement ideas)</li>
<li>Read more about Tilt</li>
<li>Learn how to help your team adopt Tilt</li>
<li>Optimize your Tilt</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Windmill Engineering

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>